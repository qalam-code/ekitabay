
===========================================================
=  **Les dÃ©fis spÃ©cifiques au Mushaf de MÃ©dine**          =
===========================================================

Les dÃ©fis spÃ©cifiques au Mushaf de MÃ©dine
    -   La Police d'Ã©criture : Le texte Uthmani nÃ©cessite des polices spÃ©cifiques (ex: KFGQPC Uthman Taha Naskh). Assurez-vous que les ligatures ne sautent pas lors du changement de style.

    -   Pagination : Si vous voulez un aspect "vrai livre", il faudra gÃ©rer les PageView. Chaque page doit calculer quels versets elle contient pour activer le surlignage.

Note importante : Pour un rendu parfait "au mot prÃ¨s" (si vous dÃ©cidez d'aller plus loin que le verset), vous devrez utiliser des coordonnÃ©es de rendu (RenderBox) pour dessiner un rectangle de couleur derriÃ¨re le texte, car le texte arabe peut Ãªtre complexe Ã  segmenter.

================================================
=  **Les dÃ©pendances clÃ©s Ã  prÃ©voir**          =
================================================

Pour respecter cette architecture, je vous suggÃ¨re d'ajouter ces packages dans votre pubspec.yaml :

-   get_it : Pour l'injection de dÃ©pendances.
-   dartz : Pour la gestion des erreurs (programmation fonctionnelle avec Either).
-   just_audio : Pour la prÃ©cision des timestamps audio.
-   sqflite ou hive : Pour la persistance des versets en mode hors-ligne.

================================================
=  **Le flux de donnÃ©es (Data Flow)**          =
================================================
Voici ce qui se passe concrÃ¨tement quand vous appuyez sur "Play" :

1-) L'AudioPlayer commence Ã  lire le fichier .mp3.
2-) Toutes les quelques millisecondes, il envoie sa position (ex: Duration(seconds: 1, milliseconds: 200)).
3-) Le Provider reÃ§oit cette valeur via le positionStream.
4-) Le Provider parcourt la liste des AyahEntity pour trouver celle oÃ¹ :$startTime \le position \le endTime$
5-) S'il trouve un nouveau verset, il change state.currentAyahId et appelle notifyListeners().
6-) Flutter redessine le RichText, et le nouveau verset change de couleur de fond.

=======================================
=           **stream audio**          =
=======================================
Un **stream audio**, câ€™est tout simplement de lâ€™**audio diffusÃ© en continu sur Internet**, sans que tu aies besoin de tÃ©lÃ©charger le fichier en entier avant de lâ€™Ã©couter ğŸ§

### ConcrÃ¨tement

* Le son est envoyÃ© **par petits morceaux (flux)**
* Tu peux **Ã©couter immÃ©diatement**, pendant que le reste arrive
* Si tu coupes Internet â†’ le son sâ€™arrÃªte

### Exemples courants

* ğŸµ **Spotify, Deezer** : musique en streaming
* ğŸ“» **Radio en ligne**
* ğŸ™ï¸ **Podcasts** (quand tu Ã©coutes sans tÃ©lÃ©charger)
* ğŸ“ **Appels VoIP** (WhatsApp, Zoom, Teams)

### Streaming vs tÃ©lÃ©chargement

| Streaming audio          | TÃ©lÃ©chargement             |
| ------------------------ | -------------------------- |
| Lecture en direct        | Fichier complet dâ€™abord    |
| Connexion requise        | Ã‰coute possible hors ligne |
| Pas (ou peu) de stockage | StockÃ© sur lâ€™appareil      |

### CÃ´tÃ© technique (rapide)

* Protocoles : **HTTP, HLS, RTSP, WebRTC**
* Formats : **MP3, AAC, Opus, OGG**
* Peut Ãªtre **live** (radio) ou **Ã  la demande** (podcast)

ğŸ‘‰ Si tu veux, je peux tâ€™expliquer **comment crÃ©er un stream audio**, ou la diffÃ©rence entre **live stream** et **on-demand**, ou encore comment Ã§a marche **cÃ´tÃ© serveur / code**.
